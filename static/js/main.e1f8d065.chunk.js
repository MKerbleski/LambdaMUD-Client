(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,n){e.exports=n(76)},43:function(e,t,n){},74:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),s=n.n(o),l=(n(43),n(7)),i=n(8),c=n(9),u=n(12),d=n(10),m=n(13),p=n(81),h=n(79),g=n(11),b=n(17),f=n(14),v=n.n(f),w=n(78);function E(){var e=Object(l.a)(["\n    form {\n        margin: 5px;\n        padding: 5px;\n        display: flex;\n        flex-direction: column;\n        input {\n            border: 1px solid red;\n            margin: 2px;\n            background: black;\n            border: 0;\n            color: green;\n            &:hover{\n                text-decoration: underline;\n            }\n        }\n    }\n"]);return E=function(){return e},e}var k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).inputHandler=function(e){e.preventDefault(),n.setState(Object(b.a)({},e.target.name,e.target.value))},n.sendCreds=function(e){e.preventDefault();var t={username:n.state.username,password:n.state.password};!0===n.props.register?(t.password2=n.state.password2,t.password1=n.state.password,delete t.password,v.a.post("https://lambda-mud-mjk.herokuapp.com/api/registration",t).then(function(e){localStorage.setItem("MUD",e.data.key),n.props.history.push("/game")}).catch(function(e){console.log(e.response)}),n.setState({username:"",password:"",password2:""})):(v.a.post("https://lambda-mud-mjk.herokuapp.com/api/login",t).then(function(e){localStorage.setItem("MUD",e.data.key),n.props.history.push("/game")}).catch(function(e){console.log(e.response)}),n.setState({username:"",password:""}))},n.state={username:"",password:"",password2:""},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(y,null,r.a.createElement("form",{onSubmit:this.sendCreds},r.a.createElement("input",{autoFocus:!0,placeholder:"enter: username",onChange:this.inputHandler,name:"username",value:this.state.username,type:"text"},this.value),r.a.createElement("input",{placeholder:"enter: password",onChange:this.inputHandler,name:"password",value:this.state.password,type:"password"},this.value),r.a.createElement("input",{style:{visibility:this.props.register?null:"hidden"},placeholder:"enter: password2",onChange:this.inputHandler,name:"password2",value:this.state.password2,type:"password"},this.value),r.a.createElement("input",{type:"submit"})))}}]),t}(a.Component),x=Object(w.a)(k),y=g.a.div(E());function j(){var e=Object(l.a)(["\n    background: black;\n    color: green;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    align-items: center;\n    .auth-box{\n        border: 1px solid green;\n        .buttons{\n                background: green;\n            button{\n                background: green;\n                padding: 5px;\n                border: none;\n                margin: 0;\n            }\n        }\n    }\n"]);return j=function(){return e},e}var O=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).toggle=function(e){"register"===e.target.name?n.setState({register:!0}):n.setState({register:!1})},n.state={register:!1},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(S,null,r.a.createElement("h1",null,"MUD"),r.a.createElement("div",{className:"auth-box"},r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:this.toggle,name:"login",style:{textDecoration:this.state.register?"none":"underline"}},"login"),r.a.createElement("button",{onClick:this.toggle,name:"register",style:{textDecoration:this.state.register?"underline":"none"}},"register")),r.a.createElement(x,{props:this.props,register:!!this.state.register})))}}]),t}(a.Component),S=g.a.div(j()),D=n(36),C=n(34),I=n.n(C),M=n(35),U=n.n(M);function N(){var e=Object(l.a)(["\n    background: black;\n    color: green;\n    height: 90%;\n    header{\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        button{\n            color: green;\n            border: 1px solid green;\n            background: black;\n            width: 25%;\n            height: 25%;\n        }\n        h1 {\n            width: 100%;\n        }\n    }\n    footer{\n        display: flex;\n        flex-direction: row;\n        height: 35px;\n        box-sizing: border-box;\n        padding: 1px;\n        form {\n            width: 100%;\n            box-sizing: border-box;\n            height: 30px;\n            input{\n                width: 100%;\n                background: black;\n                color: green;\n                border: none;\n                &:focus{\n                    border: 1px solid green;\n                }\n            }\n        }\n        button {\n            color: green;\n            border: 1px solid green;\n            background: black;\n            width: 25%;\n            height: 30px;\n        }\n    }\n    .updates-bin{\n        overflow: auto;\n        height: 70vh;\n        width: 100%;\n        display: flex;\n        flex-direction: column;\n        .event{\n            display: flex;\n            flex-direction: row;\n            align-items: space-between;\n            .updates-left{\n                border: 1px solid green\n                min-width: 35%;\n                display: flex;\n                flex-direction: column;\n                align-items: flex-start\n            }\n            .updates-right{\n                width: 100%;\n                border: 1px solid green\n            }\n        }\n    }\n"]);return N=function(){return e},e}var H=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).startGame=function(){var e=localStorage.getItem("MUD"),t={headers:{Authorization:"Token ".concat(e)}};v.a.get("https://lambda-mud-mjk.herokuapp.com/api/adv/init/",t).then(function(e){n.startPusher(e.data.uuid),n.setState({user:e.data}),n.newEvent(e.data)}).catch(function(e){console.log(e.response)})},n.newEvent=function(e){e.time=Date(Date.now()),n.setState({fromServer:Object(D.a)(n.state.fromServer).concat([e])})},n.inputHandler=function(e){e.preventDefault(),n.setState(Object(b.a)({},e.target.name,e.target.value))},n.sendCommand=function(e){e.preventDefault();var t,a=localStorage.getItem("MUD"),r={headers:{Authorization:"Token ".concat(a)}};"say"===n.state.command.substr(0,3)?(t={message:n.state.command.slice(4)},v.a.post("https://lambda-mud-mjk.herokuapp.com/api/adv/say/",t,r).then(function(e){n.newEvent(e.data)}).catch(function(e){console.log(e.response)})):(t={direction:n.state.command},v.a.post("https://lambda-mud-mjk.herokuapp.com/api/adv/move/",t,r).then(function(e){n.newEvent(e.data)}).catch(function(e){console.log(e.response)}));n.setState({command:""})},n.logout=function(e){e.preventDefault(),localStorage.removeItem("MUD"),n.props.history.push("/")},n.state={command:"",fromServer:[]},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(!localStorage.getItem("MUD"))return r.a.createElement(p.a,{to:"/"});this.startGame()}},{key:"startPusher",value:function(e){var t=this;new I.a("4830aec0ca635aa67084",{cluster:"us2",forceTLS:!0}).subscribe("p-channel-".concat(e)).bind("broadcast",function(e){t.newEvent(e)})}},{key:"render",value:function(){return this.state.user?r.a.createElement(z,null,r.a.createElement("header",null,r.a.createElement("h1",null,"MUD"),r.a.createElement("button",{onClick:this.logout},"logout ",this.state.user.name)),r.a.createElement("div",{className:"updates-bin"},this.state.fromServer.length>0?this.state.fromServer.map(function(e,t){return r.a.createElement("div",{className:"event"},r.a.createElement("div",{className:"updates-left"},r.a.createElement("p",null,U()(e.time).format("LLL")),e.message||e.response?r.a.createElement("span",null,e.message,e.response):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,e.title),e.players&&e.players.length>0?r.a.createElement("span",null," with ",e.players.map(function(e){return r.a.createElement("span",null,e,", ")})):null)),r.a.createElement("div",{key:t,className:"updates-right"},r.a.createElement("p",null,e.description)))}):null),r.a.createElement("footer",null,r.a.createElement("form",{onSubmit:this.sendCommand},r.a.createElement("input",{autoFocus:!0,placeholder:"type command",onChange:this.inputHandler,name:"command",value:this.state.command,type:"text"},this.value)),r.a.createElement("button",{onClick:this.sendCommand},"submit"))):null}}]),t}(a.Component),z=g.a.div(N());n(74);function A(){var e=Object(l.a)(["\n  height: 100%;\n  background: black;\n  color: green;\n  margin: 0;\n"]);return A=function(){return e},e}var L=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loggedIn:!1},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("MUD")?this.setState({loggedIn:!0}):this.setState({loggedIn:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(F,null,localStorage.getItem("MUD")?r.a.createElement(p.a,{from:"/",to:"/game"}):r.a.createElement(p.a,{from:"/",to:"/auth"}),r.a.createElement(h.a,{path:"/game",component:H}),r.a.createElement(h.a,{path:"/auth",component:O})))}}]),t}(a.Component),F=g.a.div(A()),T=n(80);s.a.render(r.a.createElement(T.a,null,r.a.createElement(L,null)),document.getElementById("root"))}},[[38,2,1]]]);
//# sourceMappingURL=main.e1f8d065.chunk.js.map